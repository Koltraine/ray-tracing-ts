(()=>{"use strict";var e={839:function(e,t,r){var a,s,i,n,o,u,l,f,d,h,c,w=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,r):s?s.value=r:t.set(e,r),r},v=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const m=p(r(458)),_=p(r(372)),y=p(r(577)),b=r(944),M=p(r(342));a=new WeakMap,s=new WeakMap,i=new WeakMap,n=new WeakMap,o=new WeakMap,u=new WeakMap,l=new WeakMap,f=new WeakMap,d=new WeakMap,h=new WeakMap,c=new WeakMap,t.default=class{constructor(e,t,r,p=1){a.set(this,void 0),s.set(this,void 0),i.set(this,void 0),n.set(this,2),o.set(this,100),u.set(this,1/v(this,o,"f")),l.set(this,50),f.set(this,void 0),d.set(this,void 0),h.set(this,void 0),c.set(this,void 0),w(this,a,e,"f"),w(this,s,t,"f"),w(this,i,r,"f"),w(this,n,p,"f");const m=Math.floor(v(this,s,"f")/v(this,a,"f"));w(this,f,0===m?1:m,"f");const _=v(this,s,"f")/v(this,f,"f")*2,y=M.default.create(_,0,0),b=M.default.create(0,-2,0);w(this,h,y.divide(v(this,s,"f")),"f"),w(this,c,b.divide(v(this,f,"f")),"f");const g=v(this,i,"f").subtract(M.default.create(0,0,v(this,n,"f"))).subtract(y.divide(2)).subtract(b.divide(2));w(this,d,g.add(v(this,h,"f").add(v(this,c,"f")).scale(.5)),"f")}render(e,t){const r=new _.default(.001,t);let a=`P3\n${v(this,s,"f")} ${v(this,f,"f")}\n255\n`;for(let t=0;t<v(this,f,"f");t++){console.log("File rows reamaining: "+(v(this,f,"f")-t));for(let i=0;i<v(this,s,"f");i++){let s=m.default.create(0,0,0);for(let a=0;a<v(this,o,"f");a++){const a=this.getRay(t,i);s=s.add(this.rayColor(a,e,v(this,l,"f"),r))}a+=s.scale(v(this,u,"f")).toString()+"\n"}}return a}getRay(e,t){const r=this.sampleSquare(),a=v(this,d,"f").add(v(this,h,"f").scale(t+r.x)).add(v(this,c,"f").scale(e+r.y)).subtract(v(this,i,"f"));return new y.default(v(this,i,"f"),a)}sampleSquare(){return M.default.create((0,b.genRandomNumber)()-.5,(0,b.genRandomNumber)()-.5,0)}rayColor(e,t,r,a){const s=t.hit(e,a);if(r<=0)return m.default.create(0,0,0);if(null!==s){const i=s.material.scatter(e,s);if(i){const{attenuation:e,scattered:s}=i;return this.rayColor(s,t,r-1,a).attenuate(e)}return m.default.create(0,0,0)}const i=.5*(e.dir.y+1),n=m.default.create(.5,.7,1);return m.default.create(1,1,1).scale(1-i).add(n.scale(i))}}},701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{}},259:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(383)),i=a(r(3)),n=a(r(701)),o=".ppm";class u extends n.default{constructor(e,t="output"){super(),this.filePath=this.generateUniqueFilePath(e,t)}generateUniqueFilePath(e,t){let r=i.default.join(process.cwd(),t,`${e}${o}`),a=1;for(;s.default.existsSync(r);)r=i.default.join(process.cwd(),t,`${e}-${a}${o}`),a++;return r}export(e){s.default.writeFileSync(this.filePath,e,"utf8")}}t.default=u},614:function(e,t,r){var a,s=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=i(r(372));a=new WeakMap,t.default=class{constructor(){a.set(this,[])}add(e){s(this,a,"f").push(e)}hit(e,t){const{min:r,max:i}=t;let o=i,u=null;for(let t of s(this,a,"f")){const a=t.hit(e,new n.default(r,o));null!==a&&(o=a.t,u=a)}return u}}},156:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(342)),i=a(r(938)),n=a(r(614)),o=a(r(839)),u=a(r(258)),l=a(r(458)),f=a(r(259)),d=a(r(882)),h=new f.default("my-balls"),c=(new u.default(l.default.create(.2,.2,.2)),new u.default(l.default.create(.8,.8,.8)),new d.default(l.default.create(.8,.8,0))),w=new d.default(l.default.create(.1,.2,.5)),v=new u.default(l.default.create(.8,.8,.8)),p=new u.default(l.default.create(.8,.6,.2)),m=new n.default;m.add(new i.default(s.default.create(0,-100.5,-1),100,c)),m.add(new i.default(s.default.create(0,0,-1.2),.5,w)),m.add(new i.default(s.default.create(-1,0,-1),.5,v)),m.add(new i.default(s.default.create(1,0,-1),.5,p));const _=s.default.create(0,0,0),y=new o.default(16/9,640,_);console.time("Render Time");const b=y.render(m,1/0);console.timeEnd("Render Time"),h.export(b)},629:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{scatter(e,t){throw new Error("Method not implemented.")}}},882:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(577)),i=a(r(342)),n=a(r(629));class o extends n.default{constructor(e){super(),this.albedo=e}scatter(e,t){let r=t.normal.add(i.default.createRandomUnit());return i.default.isNearZero(r)&&(r=t.normal),{scattered:new s.default(t.point,r),attenuation:this.albedo}}}t.default=o},258:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(r(577)),i=a(r(629));class n extends i.default{constructor(e){super(),this.albedo=e}scatter(e,t){const r=e.dir.reflect(t.normal);return{scattered:new s.default(t.point,r),attenuation:this.albedo}}}t.default=n},953:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{hit(e,t){throw new Error("Method not implemented.")}}},938:function(e,t,r){var a,s,i,n=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,r):s?s.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=u(r(953));class f extends l.default{constructor(e,t,r){super(),a.set(this,void 0),s.set(this,void 0),i.set(this,void 0),n(this,a,e,"f"),n(this,s,Math.max(t,0),"f"),n(this,i,r,"f")}hit(e,t){const r=o(this,a,"f").subtract(e.origin),n=e.dir.length_squared(),u=e.dir.dot(r),l=u*u-n*(r.length_squared()-o(this,s,"f")*o(this,s,"f"));if(l<0)return null;const f=Math.sqrt(l);let d=(u-f)/n;if(!t.surrounds(d)&&(d=(u+f)/n,!t.surrounds(d)))return null;const h=e.at(d),c=h.subtract(o(this,a,"f")).divide(o(this,s,"f")),w=e.dir.dot(c)<0;return{t:d,point:h,normal:w?c:c.scale(-1),isFrontFace:w,material:o(this,i,"f")}}}a=new WeakMap,s=new WeakMap,i=new WeakMap,t.default=f},458:function(e,t,r){var a,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(r(372));class u{constructor(e=0,t=0,r=0){a.set(this,void 0),s(this,a,new Float64Array([e,t,r]),"f")}static create(e=0,t=0,r=0){return new u(e,t,r)}static createFromArray(e){if(3!==e.length)throw new Error("Array must have exactly three elements.");return new u(e[0],e[1],e[2])}add(e){return new u(i(this,a,"f")[0]+i(e,a,"f")[0],i(this,a,"f")[1]+i(e,a,"f")[1],i(this,a,"f")[2]+i(e,a,"f")[2])}scale(e){return new u(i(this,a,"f")[0]*e,i(this,a,"f")[1]*e,i(this,a,"f")[2]*e)}attenuate(e){return new u(i(this,a,"f")[0]*i(e,a,"f")[0],i(this,a,"f")[1]*i(e,a,"f")[1],i(this,a,"f")[2]*i(e,a,"f")[2])}print(){console.log(`[${i(this.toBase255(),a,"f").join(", ")}]`)}toBase255(){const e=new o.default(0,.999);return new u(Math.floor(256*e.clamp(i(this,a,"f")[0])),Math.floor(256*e.clamp(i(this,a,"f")[1])),Math.floor(256*e.clamp(i(this,a,"f")[2])))}toString(){return i(this.toGama().toBase255(),a,"f").join(" ")}toGama(){return new u(i(this,a,"f")[0]<=0?0:Math.sqrt(i(this,a,"f")[0]),i(this,a,"f")[1]<=0?0:Math.sqrt(i(this,a,"f")[1]),i(this,a,"f")[2]<=0?0:Math.sqrt(i(this,a,"f")[2]))}get r(){return i(this,a,"f")[0]}get g(){return i(this,a,"f")[1]}get b(){return i(this,a,"f")[2]}}a=new WeakMap,t.default=u},372:function(e,t){var r,a,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),r=new WeakMap,a=new WeakMap,t.default=class{constructor(e,t){r.set(this,void 0),a.set(this,void 0),s(this,r,e,"f"),s(this,a,t,"f")}contains(e){return e>=i(this,r,"f")&&e<=i(this,a,"f")}surrounds(e){return e>i(this,r,"f")&&e<i(this,a,"f")}clamp(e){return Math.min(Math.max(e,i(this,r,"f")),i(this,a,"f"))}size(){i(this,a,"f"),i(this,r,"f")}get min(){return i(this,r,"f")}get max(){return i(this,a,"f")}}},577:function(e,t){var r,a,s=this&&this.__classPrivateFieldSet||function(e,t,r,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,r):s?s.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),r=new WeakMap,a=new WeakMap,t.default=class{constructor(e,t){r.set(this,void 0),a.set(this,void 0),s(this,r,e,"f"),t.uniform(),s(this,a,t,"f")}at(e){return i(this,r,"f").add(i(this,a,"f").scale(e))}get origin(){return i(this,r,"f")}get dir(){return i(this,a,"f")}}},944:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PI=void 0,t.degreesToRadians=function(e){return e*r/180},t.genRandomNumber=function(){return Math.random()},t.genRandomNumberInRange=function(e,t){return e+(t-e)*Math.random()};const r=3.141592653589793;t.PI=r},342:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=r(944);class s{constructor(e=0,t=0,r=0){this.values=new Float64Array([e,t,r])}static create(e=0,t=0,r=0){return new s(e,t,r)}static createFromArray(e){if(3!==e.length)throw new Error("Array must have exactly three elements.");return new s(e[0],e[1],e[2])}static createRandom(e=0,t=1){return new s((0,a.genRandomNumberInRange)(e,t),(0,a.genRandomNumberInRange)(e,t),(0,a.genRandomNumberInRange)(e,t))}static createRandomUnit(){for(;;){const e=s.createRandom(-1,1),t=e.length_squared();if(1e-160<t&&t<=1)return e.divide(Math.sqrt(t))}}static createRandomOnHemisphere(e){const t=s.createRandomUnit();return t.dot(e)>0?t:t.scale(-1)}static isNearZero(e){const t=1e-8;return Math.abs(e.values[0])<t&&Math.abs(e.values[1])<t&&Math.abs(e.values[2])<t}add(e){return new s(this.x+e.x,this.y+e.y,this.z+e.z)}subtract(e){return new s(this.x-e.x,this.y-e.y,this.z-e.z)}scale(e){return new s(this.x*e,this.y*e,this.z*e)}divide(e){if(0===e)throw new Error("Division by zero is not allowed.");return new s(this.x/e,this.y/e,this.z/e)}length(){return Math.sqrt(this.length_squared())}length_squared(){return this.values[0]*this.values[0]+this.values[1]*this.values[1]+this.values[2]*this.values[2]}uniform(){const e=this.length();if(0===e)throw new Error("Cannot normalize a zero-length vector.");return s.create(this.x/e,this.y/e,this.z/e)}dot(e){return this.values[0]*e.values[0]+this.values[1]*e.values[1]+this.values[2]*e.values[2]}cross(e){const[t,r,a]=this.values,[i,n,o]=e.values;return new s(r*o-a*n,a*i-t*o,t*n-r*i)}reflect(e){return this.subtract(e.scale(2*this.dot(e)))}print(){console.log(`[${this.values.join(", ")}]`)}get x(){return this.values[0]}get y(){return this.values[1]}get z(){return this.values[2]}}t.default=s},383:e=>{e.exports=require("fs")},3:e=>{e.exports=require("path")}},t={};!function r(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,r),i.exports}(156)})();